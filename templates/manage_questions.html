{% extends "base.html" %}
{% block title %}Manage Questions{% endblock %}
{% block content %}
<h2>Manage Questions for Quiz: {{ quiz['name'] }}</h2>

<form method="POST" class="mb-3">
  <div class="mb-2">
    <input type="text" name="question" placeholder="Question" required class="form-control"/>
  </div>
  <div class="mb-2">
    <input type="text" name="option1" placeholder="Option 1" required class="form-control"/>
  </div>
  <div class="mb-2">
    <input type="text" name="option2" placeholder="Option 2" required class="form-control"/>
  </div>
  <div class="mb-2">
    <input type="text" name="option3" placeholder="Option 3" required class="form-control"/>
  </div>
  <div class="mb-2">
    <input type="text" name="option4" placeholder="Option 4" required class="form-control"/>
  </div>
  <div class="mb-3">
    <input type="text" name="answer" placeholder="Correct Answer (must match one option)" required class="form-control"/>
  </div>
  <button type="submit" class="btn btn-primary">Add Question</button>
</form>

<table class="table table-bordered">
  <thead><tr><th>Question</th><th>Options</th><th>Answer</th><th>Actions</th></tr></thead>
  <tbody>
    {% for question in questions %}
    <tr>
      <td>{{ question['question'] }}</td>
      <td>
        1. {{ question['option1'] }}<br/>
        2. {{ question['option2'] }}<br/>
        3. {{ question['option3'] }}<br/>
        4. {{ question['option4'] }}
      </td>
      <td>{{ question['answer'] }}</td>
      <td>
        <a href="{{ url_for('edit_question', question_id=question['id']) }}" class="btn btn-sm btn-warning">Edit</a>
        <a href="{{ url_for('delete_question', question_id=question['id']) }}" class="btn btn-sm btn-danger" onclick="return confirm('Delete this question?')">Delete</a>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="4">No questions found.</td></tr>
    {% endfor %}
  </tbody>
</table>

<a href="{{ url_for('manage_quizzes', chapter_id=quiz['chapter_id']) }}" class="btn btn-secondary mt-3">Back to Quizzes</a>
{% endblock %}
